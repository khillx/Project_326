<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>What Should I Play?</title>
    <!-- CSS LINKING -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layout.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/header.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/gamecard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/filters.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/button.css') }}">
</head>

<body>
    <!-- HEADER -->
    <header>
        <h1 class="page-title">What Should I Play?</h1>
        <div class="header-button">
            <button onclick="">What's Trending?</button>
        </div>
    </header>

    <main> 
        <!-- GAME CARD -->
        <section class="gamecard">
            <!-- Game Card: Game Title -->
            <div class="game-title" id="game-title"></div>
            <!-- Game Card: Image -->
            <img src= "//:0" class="game-image" id="game-image" > 
            <!-- Game Card: Game Description -->
            <div class="game-description" id="game-description"> </div>
            <!-- Game Card: Game Info Section -->
            <div class="game-info" id="game-info"> </div>
            <!-- Game Card: Buttons -->
            <div class="game-button">
                <button onclick="getRandomGame()">Random Game</button>
                <button onclick="">Next Game</button>
            </div>
        </section>
        
        <!-- FILTERS -->
        <section class="filters">
            <!-- Filters: Options-->
            <h3>Filter by...</h3>
            <label><input type="checkbox" name="genre" value="Action"> Action</label>
            <label><input type="checkbox" name="genre" value="Adventure"> Adventure</label>
            <label><input type="checkbox" name="genre" value="Indie"> Indie</label>
            <label><input type="checkbox" name="genre" value="RPG"> RPG</label>
            <label><input type="checkbox" name="genre" value="Strategy"> Strategy</label>
            <label><input type="checkbox" name="genre" value="Puzzle"> Puzzle</label> 
            <label><input type="checkbox" name="genre" value="Singleplayer"> Singleplayer</label> 
            <label><input type="checkbox" name="genre" value="Sports"> Sports</label> 
                
            <!-- Filters: Button-->
            <div class="filter-button">
                <button onclick="">Apply Filter(s)</button>
                <button onclick="">Reset Filter(s)</button>
            </div>
        </section>
    </main>


<script>
async function getRandomGame() {
    const res = await fetch("/game/random");
    const data = await res.json();
    displayGame(data);
}

function displayGame(game) {
    if(game.error){
        alert(game.error);
        return;
    }
    document.getElementById("game-title").textContent = game.name;
    document.getElementById("game-image").src = game.image;
    document.getElementById("game-description").innerHTML = `<p>${game.short_description}</p>`;
    document.getElementById("game-info").innerHTML = `
        <p><strong>Price:</strong> ${game.price}</p>
        <p><strong>Reviews:</strong> ${game.review_summary}</p>
        <p><strong>Release Date:</strong> ${game.release_date}</p>
        <p><strong>Genre:</strong> ${game.genres.join(", ")}</p>
    `;
}
</script>


</body>
</html>
